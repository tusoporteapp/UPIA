const apiKey="AIzaSyC2gil5B_kl_qRxDtmon8qJ4TdAAHZs4D0",blogId="6451391688138110772",maxPosts=500,container=document.querySelector(".row.row-cols-1"),searchInput=document.querySelector('input[type="text"]');async function fetchPosts(){try{const e=await fetch(`https://www.googleapis.com/blogger/v3/blogs/${blogId}/posts?key=${apiKey}&maxResults=500`);renderPosts((await e.json()).items)}catch(e){console.error("Error fetching Blogger posts:",e)}}function renderPosts(e){container.innerHTML="",e.forEach((e=>{const t=`\n            <div class="col mb-4">\n                <div>\n                    <a href="#" onclick="openModal('${e.id}')">\n                        <img class="rounded img-fluid shadow w-100 fit-cover" src="${getImageFromPost(e)}" style="height: 250px;" />\n                    </a>\n                    <div class="py-4">\n                        <span class="badge bg-primary mb-2">${getLabels(e)}</span>\n                        <h4 class="fw-bold">${e.title}</h4>\n                        <p class="text-muted">${truncateText(e.content,100)}</p>\n                    </div>\n                </div>\n            </div>\n        `;container.innerHTML+=t}))}function getImageFromPost(e){const t=document.createElement("div");t.innerHTML=e.content;const n=t.querySelector("img");return n?n.src:"products/default.jpg"}function getLabels(e){return e.labels?e.labels[0]:"Sin categorÃ­a"}function truncateText(e,t){const n=document.createElement("div");n.innerHTML=e;const o=n.textContent||n.innerText||"";return o.length>t?o.substring(0,t)+"...":o}function openModal(e){fetch(`https://www.googleapis.com/blogger/v3/blogs/${blogId}/posts/${e}?key=${apiKey}`).then((e=>e.json())).then((e=>{document.querySelector(".modal-title").innerText=e.title,document.querySelector(".modal-body").innerHTML=e.content,new bootstrap.Modal(document.getElementById("modal-1")).show()})).catch((e=>console.error("Error fetching post:",e)))}document.addEventListener("input",(()=>{const e=searchInput.value.toLowerCase();document.querySelectorAll(".col.mb-4").forEach((t=>{const n=t.querySelector("h4").innerText.toLowerCase(),o=t.querySelector(".badge").innerText.toLowerCase();t.style.display=n.includes(e)||o.includes(e)?"block":"none"}))})),document.addEventListener("DOMContentLoaded",fetchPosts);